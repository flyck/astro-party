---
import Modal from "../../layouts/Modal.astro";
import Input from "../mini/input.astro";
import SubmitButton from "../submitButton.astro";
import VirginDropdown from "../virginDropdown.astro";

interface Props {
  buttonId: string;
  assignees: { name: string; id: number }[];
}

const { buttonId, assignees } = Astro.props;
---
<Modal title="Create Task" openModalId={buttonId}>
  <form
    hx-post="/server/task/create"
    hx-swap="none"
  >
    <Input class="rounded-t-lg" name="title" title="Title" value="Buy Beer" autofocus={true} validateUrl="/server/task/validate"  />
    <VirginDropdown assignees={assignees.map((p) => ({id: p.id ,name: p.name}))}/>
    <Input name="description" title="Description" value="" validateUrl="/server/task/validate" />
    <SubmitButton>Ok</SubmitButton>
  </form>
</Modal>
